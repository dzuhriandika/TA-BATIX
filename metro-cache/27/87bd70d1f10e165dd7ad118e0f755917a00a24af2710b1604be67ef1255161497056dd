{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/get","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"./Animation","data":{"isAsync":false}},{"name":"../NativeAnimatedHelper","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  var _get = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/get\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/inherits\");\n\n  var Animation = _$$_REQUIRE(_dependencyMap[6], \"./Animation\");\n\n  var _require = _$$_REQUIRE(_dependencyMap[7], \"../NativeAnimatedHelper\"),\n      shouldUseNativeDriver = _require.shouldUseNativeDriver;\n\n  var DecayAnimation = function (_Animation) {\n    _inherits(DecayAnimation, _Animation);\n\n    function DecayAnimation(config) {\n      var _config$deceleration, _config$isInteraction, _config$iterations;\n\n      var _this;\n\n      _classCallCheck(this, DecayAnimation);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(DecayAnimation).call(this));\n      _this._deceleration = (_config$deceleration = config.deceleration) != null ? _config$deceleration : 0.998;\n      _this._velocity = config.velocity;\n      _this._useNativeDriver = shouldUseNativeDriver(config);\n      _this.__isInteraction = (_config$isInteraction = config.isInteraction) != null ? _config$isInteraction : !_this._useNativeDriver;\n      _this.__iterations = (_config$iterations = config.iterations) != null ? _config$iterations : 1;\n      return _this;\n    }\n\n    _createClass(DecayAnimation, [{\n      key: \"__getNativeAnimationConfig\",\n      value: function __getNativeAnimationConfig() {\n        return {\n          type: 'decay',\n          deceleration: this._deceleration,\n          velocity: this._velocity,\n          iterations: this.__iterations\n        };\n      }\n    }, {\n      key: \"start\",\n      value: function start(fromValue, onUpdate, onEnd, previousAnimation, animatedValue) {\n        this.__active = true;\n        this._lastValue = fromValue;\n        this._fromValue = fromValue;\n        this._onUpdate = onUpdate;\n        this.__onEnd = onEnd;\n        this._startTime = Date.now();\n\n        if (this._useNativeDriver) {\n          this.__startNativeAnimation(animatedValue);\n        } else {\n          this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n        }\n      }\n    }, {\n      key: \"onUpdate\",\n      value: function onUpdate() {\n        var now = Date.now();\n        var value = this._fromValue + this._velocity / (1 - this._deceleration) * (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n\n        this._onUpdate(value);\n\n        if (Math.abs(this._lastValue - value) < 0.1) {\n          this.__debouncedOnEnd({\n            finished: true\n          });\n\n          return;\n        }\n\n        this._lastValue = value;\n\n        if (this.__active) {\n          this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        _get(_getPrototypeOf(DecayAnimation.prototype), \"stop\", this).call(this);\n\n        this.__active = false;\n        global.cancelAnimationFrame(this._animationFrame);\n\n        this.__debouncedOnEnd({\n          finished: false\n        });\n      }\n    }]);\n\n    return DecayAnimation;\n  }(Animation);\n\n  module.exports = DecayAnimation;\n});","lineCount":106,"map":[[2,0,10,0],[16,0,12,0],[16,6,12,6,"Animation"],[16,15,12,15],[16,18,12,18,"require"],[16,29,12,25],[16,63,12,0],[18,17,14,32,"require"],[18,28,14,39],[18,74],[19,6,14,7,"shouldUseNativeDriver"],[19,27],[19,39,14,7,"shouldUseNativeDriver"],[19,60],[21,6,29,6,"DecayAnimation"],[21,20],[24,0,39,2],[24,28,39,14,"config"],[24,34,39,2],[24,36,39,50],[25,0,39,50],[27,0,39,50],[29,0,39,50],[31,0,40,4],[32,0,41,4],[32,12,41,9,"_deceleration"],[32,25,41,4],[32,52,41,25,"config"],[32,58,41,31],[32,59,41,32,"deceleration"],[32,71,41,4],[32,106,41,48],[32,111,41,4],[33,0,42,4],[33,12,42,9,"_velocity"],[33,21,42,4],[33,24,42,21,"config"],[33,30,42,27],[33,31,42,28,"velocity"],[33,39,42,4],[34,0,43,4],[34,12,43,9,"_useNativeDriver"],[34,28,43,4],[34,31,43,28,"shouldUseNativeDriver"],[34,52,43,49],[34,53,43,50,"config"],[34,59,43,49],[34,60,43,4],[35,0,44,4],[35,12,44,9,"__isInteraction"],[35,27,44,4],[35,55,44,27,"config"],[35,61,44,33],[35,62,44,34,"isInteraction"],[35,75,44,4],[35,111,44,51],[35,112,44,52],[35,118,44,57,"_useNativeDriver"],[35,134,44,4],[36,0,45,4],[36,12,45,9,"__iterations"],[36,24,45,4],[36,49,45,24,"config"],[36,55,45,30],[36,56,45,31,"iterations"],[36,66,45,4],[36,99,45,45],[36,100,45,4],[37,0,39,50],[38,0,46,3],[42,51,53,6],[43,0,54,4],[43,15,54,11],[44,0,55,6,"type"],[44,10,55,6,"type"],[44,14,55,10],[44,16,55,12],[44,23,54,11],[45,0,56,6,"deceleration"],[45,10,56,6,"deceleration"],[45,22,56,18],[45,24,56,20],[45,29,56,25,"_deceleration"],[45,42,54,11],[46,0,57,6,"velocity"],[46,10,57,6,"velocity"],[46,18,57,14],[46,20,57,16],[46,25,57,21,"_velocity"],[46,34,54,11],[47,0,58,6,"iterations"],[47,10,58,6,"iterations"],[47,20,58,16],[47,22,58,18],[47,27,58,23,"__iterations"],[48,0,54,11],[48,9,54,4],[49,0,60,3],[52,28,63,4,"fromValue"],[52,37],[52,39,64,4,"onUpdate"],[52,47],[52,49,65,4,"onEnd"],[52,54],[52,56,66,4,"previousAnimation"],[52,73],[52,75,67,4,"animatedValue"],[52,88],[52,90,68,10],[53,0,69,4],[53,13,69,9,"__active"],[53,21,69,4],[53,24,69,20],[53,28,69,4],[54,0,70,4],[54,13,70,9,"_lastValue"],[54,23,70,4],[54,26,70,22,"fromValue"],[54,35,70,4],[55,0,71,4],[55,13,71,9,"_fromValue"],[55,23,71,4],[55,26,71,22,"fromValue"],[55,35,71,4],[56,0,72,4],[56,13,72,9,"_onUpdate"],[56,22,72,4],[56,25,72,21,"onUpdate"],[56,33,72,4],[57,0,73,4],[57,13,73,9,"__onEnd"],[57,20,73,4],[57,23,73,19,"onEnd"],[57,28,73,4],[58,0,74,4],[58,13,74,9,"_startTime"],[58,23,74,4],[58,26,74,22,"Date"],[58,30,74,26],[58,31,74,27,"now"],[58,34,74,22],[58,36,74,4],[60,0,75,4],[60,12,75,8],[60,17,75,13,"_useNativeDriver"],[60,33,75,4],[60,35,75,31],[61,0,76,6],[61,15,76,11,"__startNativeAnimation"],[61,37,76,6],[61,38,76,34,"animatedValue"],[61,51,76,6],[62,0,77,5],[62,9,75,4],[62,15,77,11],[63,0,78,6],[63,15,78,11,"_animationFrame"],[63,30,78,6],[63,33,78,29,"requestAnimationFrame"],[63,54,78,50],[63,55,78,51],[63,60,78,56,"onUpdate"],[63,68,78,51],[63,69,78,65,"bind"],[63,73,78,51],[63,74,78,70],[63,78,78,51],[63,79,78,50],[63,80,78,6],[64,0,79,5],[65,0,80,3],[68,33,82,19],[69,0,83,4],[69,12,83,10,"now"],[69,15,83,13],[69,18,83,16,"Date"],[69,22,83,20],[69,23,83,21,"now"],[69,26,83,16],[69,28,83,4],[70,0,85,4],[70,12,85,10,"value"],[70,17,85,15],[70,20,86,6],[70,25,86,11,"_fromValue"],[70,35,86,6],[70,38,87,7],[70,43,87,12,"_velocity"],[70,52,87,7],[70,56,87,25],[70,60,87,29],[70,65,87,34,"_deceleration"],[70,78,87,7],[70,79,87,6],[70,83,88,9],[70,87,88,13,"Math"],[70,91,88,17],[70,92,88,18,"exp"],[70,95,88,13],[70,96,88,22],[70,98,88,24],[70,102,88,28],[70,107,88,33,"_deceleration"],[70,120,88,22],[70,125,88,51,"now"],[70,128,88,54],[70,131,88,57],[70,136,88,62,"_startTime"],[70,146,88,22],[70,147,88,13],[70,148,87,6],[70,149,85,4],[72,0,90,4],[72,13,90,9,"_onUpdate"],[72,22,90,4],[72,23,90,19,"value"],[72,28,90,4],[74,0,92,4],[74,12,92,8,"Math"],[74,16,92,12],[74,17,92,13,"abs"],[74,20,92,8],[74,21,92,17],[74,26,92,22,"_lastValue"],[74,36,92,17],[74,39,92,35,"value"],[74,44,92,8],[74,48,92,44],[74,51,92,4],[74,53,92,49],[75,0,93,6],[75,15,93,11,"__debouncedOnEnd"],[75,31,93,6],[75,32,93,28],[76,0,93,29,"finished"],[76,12,93,29,"finished"],[76,20,93,37],[76,22,93,39],[77,0,93,28],[77,11,93,6],[79,0,94,6],[80,0,95,5],[82,0,97,4],[82,13,97,9,"_lastValue"],[82,23,97,4],[82,26,97,22,"value"],[82,31,97,4],[84,0,98,4],[84,12,98,8],[84,17,98,13,"__active"],[84,25,98,4],[84,27,98,23],[85,0,99,6],[85,15,99,11,"_animationFrame"],[85,30,99,6],[85,33,99,29,"requestAnimationFrame"],[85,54,99,50],[85,55,99,51],[85,60,99,56,"onUpdate"],[85,68,99,51],[85,69,99,65,"bind"],[85,73,99,51],[85,74,99,70],[85,78,99,51],[85,79,99,50],[85,80,99,6],[86,0,100,5],[87,0,101,3],[90,29,103,15],[91,0,104,4],[93,0,105,4],[93,13,105,9,"__active"],[93,21,105,4],[93,24,105,20],[93,29,105,4],[94,0,106,4,"global"],[94,8,106,4,"global"],[94,14,106,10],[94,15,106,11,"cancelAnimationFrame"],[94,35,106,4],[94,36,106,32],[94,41,106,37,"_animationFrame"],[94,56,106,4],[96,0,107,4],[96,13,107,9,"__debouncedOnEnd"],[96,29,107,4],[96,30,107,26],[97,0,107,27,"finished"],[97,10,107,27,"finished"],[97,18,107,35],[97,20,107,37],[98,0,107,26],[98,9,107,4],[99,0,108,3],[103,4,29,29,"Animation"],[103,13],[105,0,111,0,"module"],[105,2,111,0,"module"],[105,8,111,6],[105,9,111,7,"exports"],[105,16,111,0],[105,19,111,17,"DecayAnimation"],[105,33,111,0]],"functionMap":{"names":["<global>","DecayAnimation","constructor","__getNativeAnimationConfig","start","onUpdate","stop"],"mappings":"AAA;AC4B;ECU;GDO;EEE;GFY;EGE;GHkB;EIE;GJmB;EKE;GLK;CDC"}},"type":"js/module"}]}