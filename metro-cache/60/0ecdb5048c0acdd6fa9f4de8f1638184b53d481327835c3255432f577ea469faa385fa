{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./NativeBlobModule","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}},{"name":"./Blob","data":{"isAsync":false}},{"name":"./BlobRegistry","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _extends2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/extends\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/createClass\"));\n\n  var _NativeBlobModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./NativeBlobModule\"));\n\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"invariant\"));\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  var Blob = _$$_REQUIRE(_dependencyMap[7], \"./Blob\");\n\n  var BlobRegistry = _$$_REQUIRE(_dependencyMap[8], \"./BlobRegistry\");\n\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n          v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n\n  var BlobManager = function () {\n    function BlobManager() {\n      (0, _classCallCheck2.default)(this, BlobManager);\n    }\n\n    (0, _createClass2.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || global.ArrayBufferView && part instanceof global.ArrayBufferView) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n\n          if (part instanceof Blob) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n\n        _NativeBlobModule.default.createFromParts(items, blobId);\n\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        BlobRegistry.register(options.blobId);\n        return (0, _extends2.default)(Object.create(Blob.prototype), {\n          data: options.__collector == null ? _objectSpread({}, options, {\n            __collector: createBlobCollector(options.blobId)\n          }) : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        BlobRegistry.unregister(blobId);\n\n        if (BlobRegistry.has(blobId)) {\n          return;\n        }\n\n        _NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n    return BlobManager;\n  }();\n\n  BlobManager.isAvailable = !!_NativeBlobModule.default;\n  module.exports = BlobManager;\n});","lineCount":143,"map":[[2,0,11,0],[14,0,17,0],[16,0,18,0],[22,0,13,0],[22,6,13,6,"Blob"],[22,10,13,10],[22,13,13,13,"require"],[22,24,13,20],[22,53,13,0],[24,0,14,0],[24,6,14,6,"BlobRegistry"],[24,18,14,18],[24,21,14,21,"require"],[24,32,14,28],[24,69,14,0],[26,0,27,0],[26,11,27,9,"uuidv4"],[26,17,27,0],[26,20,27,26],[27,0,28,2],[27,11,28,9],[27,50,28,48,"replace"],[27,57,28,9],[27,58,28,56],[27,65,28,9],[27,67,28,65],[27,77,28,65,"c"],[27,78,28,66],[27,80,28,70],[28,0,29,4],[28,10,29,10,"r"],[28,11,29,11],[28,14,29,15,"Math"],[28,18,29,19],[28,19,29,20,"random"],[28,25,29,15],[28,30,29,31],[28,32,29,14],[28,35,29,37],[28,36,29,4],[29,0,29,4],[29,10,30,6,"v"],[29,11,30,7],[29,14,30,10,"c"],[29,15,30,11],[29,19,30,15],[29,22,30,10],[29,25,30,21,"r"],[29,26,30,10],[29,29,30,26,"r"],[29,30,30,27],[29,33,30,30],[29,36,30,25],[29,39,30,37],[29,42,29,4],[30,0,31,4],[30,13,31,11,"v"],[30,14,31,12],[30,15,31,13,"toString"],[30,23,31,11],[30,24,31,22],[30,26,31,11],[30,27,31,4],[31,0,32,3],[31,5,28,9],[31,6,28,2],[32,0,33,1],[34,0,42,0],[34,11,42,9,"createBlobCollector"],[34,30,42,0],[34,31,42,29,"blobId"],[34,37,42,0],[34,39,42,67],[35,0,43,2],[35,8,43,6,"global"],[35,14,43,12],[35,15,43,13,"__blobCollectorProvider"],[35,38,43,6],[35,42,43,40],[35,46,43,2],[35,48,43,46],[36,0,44,4],[36,13,44,11],[36,17,44,4],[37,0,45,3],[37,5,43,2],[37,11,45,9],[38,0,46,4],[38,13,46,11,"global"],[38,19,46,17],[38,20,46,18,"__blobCollectorProvider"],[38,43,46,11],[38,44,46,42,"blobId"],[38,50,46,11],[38,51,46,4],[39,0,47,3],[40,0,48,1],[42,6,53,6,"BlobManager"],[42,17],[49,38,63,4,"parts"],[49,43],[49,45,64,4,"options"],[49,52],[49,54,65,10],[50,0,66,4],[50,32,66,14,"NativeBlobModule"],[50,57,66,4],[50,59,66,32],[50,91,66,4],[51,0,68,4],[51,12,68,10,"blobId"],[51,18,68,16],[51,21,68,19,"uuidv4"],[51,27,68,25],[51,29,68,4],[52,0,69,4],[52,12,69,10,"items"],[52,17,69,15],[52,20,69,18,"parts"],[52,25,69,23],[52,26,69,24,"map"],[52,29,69,18],[52,30,69,28],[52,40,69,28,"part"],[52,44,69,32],[52,46,69,36],[53,0,70,6],[53,14,71,8,"part"],[53,18,71,12],[53,30,71,24,"ArrayBuffer"],[53,41,71,8],[53,45,72,9,"global"],[53,51,72,15],[53,52,72,16,"ArrayBufferView"],[53,67,72,9],[53,71,72,35,"part"],[53,75,72,39],[53,87,72,51,"global"],[53,93,72,57],[53,94,72,58,"ArrayBufferView"],[53,109,70,6],[53,111,73,8],[54,0,74,8],[54,18,74,14],[54,22,74,18,"Error"],[54,27,74,14],[54,28,75,10],[54,103,74,14],[54,104,74,8],[55,0,77,7],[57,0,78,6],[57,14,78,10,"part"],[57,18,78,14],[57,30,78,26,"Blob"],[57,34,78,6],[57,36,78,32],[58,0,79,8],[58,19,79,15],[59,0,80,10,"data"],[59,14,80,10,"data"],[59,18,80,14],[59,20,80,16,"part"],[59,24,80,20],[59,25,80,21,"data"],[59,29,79,15],[60,0,81,10,"type"],[60,14,81,10,"type"],[60,18,81,14],[60,20,81,16],[61,0,79,15],[61,13,79,8],[62,0,83,7],[62,11,78,6],[62,17,83,13],[63,0,84,8],[63,19,84,15],[64,0,85,10,"data"],[64,14,85,10,"data"],[64,18,85,14],[64,20,85,16,"String"],[64,26,85,22],[64,27,85,23,"part"],[64,31,85,22],[64,32,84,15],[65,0,86,10,"type"],[65,14,86,10,"type"],[65,18,86,14],[65,20,86,16],[66,0,84,15],[66,13,84,8],[67,0,88,7],[68,0,89,5],[68,9,69,18],[68,10,69,4],[69,0,90,4],[69,12,90,10,"size"],[69,16,90,14],[69,19,90,17,"items"],[69,24,90,22],[69,25,90,23,"reduce"],[69,31,90,17],[69,32,90,30],[69,42,90,31,"acc"],[69,45,90,30],[69,47,90,36,"curr"],[69,51,90,30],[69,53,90,45],[70,0,91,6],[70,14,91,10,"curr"],[70,18,91,14],[70,19,91,15,"type"],[70,23,91,10],[70,28,91,24],[70,36,91,6],[70,38,91,34],[71,0,92,8],[71,19,92,15,"acc"],[71,22,92,18],[71,25,92,21,"global"],[71,31,92,27],[71,32,92,28,"unescape"],[71,40,92,21],[71,41,92,37,"encodeURI"],[71,50,92,46],[71,51,92,47,"curr"],[71,55,92,51],[71,56,92,52,"data"],[71,60,92,46],[71,61,92,21],[71,63,92,59,"length"],[71,69,92,8],[72,0,93,7],[72,11,91,6],[72,17,93,13],[73,0,94,8],[73,19,94,15,"acc"],[73,22,94,18],[73,25,94,21,"curr"],[73,29,94,25],[73,30,94,26,"data"],[73,34,94,21],[73,35,94,31,"size"],[73,39,94,8],[74,0,95,7],[75,0,96,5],[75,9,90,17],[75,11,96,7],[75,12,90,17],[75,13,90,4],[77,0,98,4,"NativeBlobModule"],[77,34,98,21,"createFromParts"],[77,49,98,4],[77,50,98,37,"items"],[77,55,98,4],[77,57,98,44,"blobId"],[77,63,98,4],[79,0,100,4],[79,15,100,11,"BlobManager"],[79,26,100,22],[79,27,100,23,"createFromOptions"],[79,44,100,11],[79,45,100,41],[80,0,101,6,"blobId"],[80,10,101,6,"blobId"],[80,16,101,12],[80,18,101,6,"blobId"],[80,24,100,41],[81,0,102,6,"offset"],[81,10,102,6,"offset"],[81,16,102,12],[81,18,102,14],[81,19,100,41],[82,0,103,6,"size"],[82,10,103,6,"size"],[82,14,103,10],[82,16,103,6,"size"],[82,20,100,41],[83,0,104,6,"type"],[83,10,104,6,"type"],[83,14,104,10],[83,16,104,12,"options"],[83,23,104,19],[83,26,104,22,"options"],[83,33,104,29],[83,34,104,30,"type"],[83,38,104,19],[83,41,104,37],[83,43,100,41],[84,0,105,6,"lastModified"],[84,10,105,6,"lastModified"],[84,22,105,18],[84,24,105,20,"options"],[84,31,105,27],[84,34,105,30,"options"],[84,41,105,37],[84,42,105,38,"lastModified"],[84,54,105,27],[84,57,105,53,"Date"],[84,61,105,57],[84,62,105,58,"now"],[84,65,105,53],[85,0,100,41],[85,9,100,11],[85,10,100,4],[86,0,107,3],[89,40,113,27,"options"],[89,47],[89,49,113,52],[90,0,114,4,"BlobRegistry"],[90,8,114,4,"BlobRegistry"],[90,20,114,16],[90,21,114,17,"register"],[90,29,114,4],[90,30,114,26,"options"],[90,37,114,33],[90,38,114,34,"blobId"],[90,44,114,4],[91,0,115,4],[91,15,115,11],[91,38,115,25,"Object"],[91,44,115,31],[91,45,115,32,"create"],[91,51,115,25],[91,52,115,39,"Blob"],[91,56,115,43],[91,57,115,44,"prototype"],[91,66,115,25],[91,67,115,11],[91,69,115,56],[92,0,116,6,"data"],[92,10,116,6,"data"],[92,14,116,10],[92,16,120,8,"options"],[92,23,120,15],[92,24,120,16,"__collector"],[92,35,120,8],[92,39,120,31],[92,43,120,8],[92,64,122,17,"options"],[92,71,120,8],[93,0,123,14,"__collector"],[93,12,123,14,"__collector"],[93,23,123,25],[93,25,123,27,"createBlobCollector"],[93,44,123,46],[93,45,123,47,"options"],[93,52,123,54],[93,53,123,55,"blobId"],[93,59,123,46],[94,0,120,8],[94,15,125,12,"options"],[95,0,115,56],[95,9,115,11],[95,10,115,4],[96,0,127,3],[99,30,132,17,"blobId"],[99,36],[99,38,132,39],[100,0,133,4],[100,32,133,14,"NativeBlobModule"],[100,57,133,4],[100,59,133,32],[100,91,133,4],[101,0,135,4,"BlobRegistry"],[101,8,135,4,"BlobRegistry"],[101,20,135,16],[101,21,135,17,"unregister"],[101,31,135,4],[101,32,135,28,"blobId"],[101,38,135,4],[103,0,136,4],[103,12,136,8,"BlobRegistry"],[103,24,136,20],[103,25,136,21,"has"],[103,28,136,8],[103,29,136,25,"blobId"],[103,35,136,8],[103,36,136,4],[103,38,136,34],[104,0,137,6],[105,0,138,5],[107,0,139,4,"NativeBlobModule"],[107,34,139,21,"release"],[107,41,139,4],[107,42,139,29,"blobId"],[107,48,139,4],[108,0,140,3],[111,45,146,38],[112,0,147,4],[112,32,147,14,"NativeBlobModule"],[112,57,147,4],[112,59,147,32],[112,91,147,4],[114,0,149,4,"NativeBlobModule"],[114,34,149,21,"addNetworkingHandler"],[114,54,149,4],[115,0,150,3],[118,42,156,29,"socketId"],[118,50],[118,52,156,53],[119,0,157,4],[119,32,157,14,"NativeBlobModule"],[119,57,157,4],[119,59,157,32],[119,91,157,4],[121,0,159,4,"NativeBlobModule"],[121,34,159,21,"addWebSocketHandler"],[121,53,159,4],[121,54,159,41,"socketId"],[121,62,159,4],[122,0,160,3],[125,45,166,32,"socketId"],[125,53],[125,55,166,56],[126,0,167,4],[126,32,167,14,"NativeBlobModule"],[126,57,167,4],[126,59,167,32],[126,91,167,4],[128,0,169,4,"NativeBlobModule"],[128,34,169,21,"removeWebSocketHandler"],[128,56,169,4],[128,57,169,44,"socketId"],[128,65,169,4],[129,0,170,3],[132,37,175,24,"blob"],[132,41],[132,43,175,36,"socketId"],[132,51],[132,53,175,60],[133,0,176,4],[133,32,176,14,"NativeBlobModule"],[133,57,176,4],[133,59,176,32],[133,91,176,4],[135,0,178,4,"NativeBlobModule"],[135,34,178,21,"sendOverSocket"],[135,48,178,4],[135,49,178,36,"blob"],[135,53,178,40],[135,54,178,41,"data"],[135,58,178,4],[135,60,178,47,"socketId"],[135,68,178,4],[136,0,179,3],[141,0,53,6,"BlobManager"],[141,2,53,6,"BlobManager"],[141,13],[141,14,57,9,"isAvailable"],[141,25],[141,28,57,32],[141,29,57,33],[141,30,57,34,"NativeBlobModule"],[141,55],[142,0,182,0,"module"],[142,2,182,0,"module"],[142,8,182,6],[142,9,182,7,"exports"],[142,16,182,0],[142,19,182,17,"BlobManager"],[142,30,182,0]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;AC0B;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDoB;8BEC;KFM;GDW;EIM;GJc;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"}},"type":"js/module"}]}