{"dependencies":[{"name":"./AssetRegistry","data":{"isAsync":false}},{"name":"./AssetSourceResolver","data":{"isAsync":false}},{"name":"../NativeModules/specs/NativeSourceCode","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var AssetRegistry = _$$_REQUIRE(_dependencyMap[0], \"./AssetRegistry\");\n\n  var AssetSourceResolver = _$$_REQUIRE(_dependencyMap[1], \"./AssetSourceResolver\");\n\n  var _customSourceTransformer, _serverURL, _scriptURL;\n\n  var _sourceCodeScriptURL;\n\n  function getSourceCodeScriptURL() {\n    if (_sourceCodeScriptURL) {\n      return _sourceCodeScriptURL;\n    }\n\n    var sourceCode = global.nativeExtensions && global.nativeExtensions.SourceCode;\n\n    if (!sourceCode) {\n      sourceCode = _$$_REQUIRE(_dependencyMap[2], \"../NativeModules/specs/NativeSourceCode\").default;\n    }\n\n    _sourceCodeScriptURL = sourceCode.getConstants().scriptURL;\n    return _sourceCodeScriptURL;\n  }\n\n  function getDevServerURL() {\n    if (_serverURL === undefined) {\n      var sourceCodeScriptURL = getSourceCodeScriptURL();\n      var match = sourceCodeScriptURL && sourceCodeScriptURL.match(/^https?:\\/\\/.*?\\//);\n\n      if (match) {\n        _serverURL = match[0];\n      } else {\n        _serverURL = null;\n      }\n    }\n\n    return _serverURL;\n  }\n\n  function _coerceLocalScriptURL(scriptURL) {\n    if (scriptURL) {\n      if (scriptURL.startsWith('assets://')) {\n        return null;\n      }\n\n      scriptURL = scriptURL.substring(0, scriptURL.lastIndexOf('/') + 1);\n\n      if (!scriptURL.includes('://')) {\n        scriptURL = 'file://' + scriptURL;\n      }\n    }\n\n    return scriptURL;\n  }\n\n  function getScriptURL() {\n    if (_scriptURL === undefined) {\n      _scriptURL = _coerceLocalScriptURL(getSourceCodeScriptURL());\n    }\n\n    return _scriptURL;\n  }\n\n  function setCustomSourceTransformer(transformer) {\n    _customSourceTransformer = transformer;\n  }\n\n  function resolveAssetSource(source) {\n    if (typeof source === 'object') {\n      return source;\n    }\n\n    var asset = AssetRegistry.getAssetByID(source);\n\n    if (!asset) {\n      return null;\n    }\n\n    var resolver = new AssetSourceResolver(getDevServerURL(), getScriptURL(), asset);\n\n    if (_customSourceTransformer) {\n      return _customSourceTransformer(resolver);\n    }\n\n    return resolver.defaultAsset();\n  }\n\n  module.exports = resolveAssetSource;\n  module.exports.pickScale = AssetSourceResolver.pickScale;\n  module.exports.setCustomSourceTransformer = setCustomSourceTransformer;\n});","lineCount":93,"map":[[2,0,14,0],[4,0,16,0],[4,6,16,6,"AssetRegistry"],[4,19,16,19],[4,22,16,22,"require"],[4,33,16,29],[4,71,16,0],[6,0,17,0],[6,6,17,6,"AssetSourceResolver"],[6,25,17,25],[6,28,17,28,"require"],[6,39,17,35],[6,83,17,0],[8,0,21,0],[8,6,21,4,"_customSourceTransformer"],[8,30,21,0],[8,32,21,30,"_serverURL"],[8,42,21,0],[8,44,21,42,"_scriptURL"],[8,54,21,0],[10,0,23,0],[10,6,23,4,"_sourceCodeScriptURL"],[10,26,23,0],[12,0,24,0],[12,11,24,9,"getSourceCodeScriptURL"],[12,33,24,0],[12,36,24,43],[13,0,25,2],[13,8,25,6,"_sourceCodeScriptURL"],[13,28,25,2],[13,30,25,28],[14,0,26,4],[14,13,26,11,"_sourceCodeScriptURL"],[14,33,26,4],[15,0,27,3],[17,0,29,2],[17,8,29,6,"sourceCode"],[17,18,29,16],[17,21,30,4,"global"],[17,27,30,10],[17,28,30,11,"nativeExtensions"],[17,44,30,4],[17,48,30,31,"global"],[17,54,30,37],[17,55,30,38,"nativeExtensions"],[17,71,30,31],[17,72,30,55,"SourceCode"],[17,82,29,2],[19,0,31,2],[19,8,31,6],[19,9,31,7,"sourceCode"],[19,19,31,2],[19,21,31,19],[20,0,32,4,"sourceCode"],[20,6,32,4,"sourceCode"],[20,16,32,14],[20,19,32,17,"require"],[20,30,32,24],[20,92,32,17],[20,93,32,68,"default"],[20,100,32,4],[21,0,33,3],[23,0,34,2,"_sourceCodeScriptURL"],[23,4,34,2,"_sourceCodeScriptURL"],[23,24,34,22],[23,27,34,25,"sourceCode"],[23,37,34,35],[23,38,34,36,"getConstants"],[23,50,34,25],[23,53,34,51,"scriptURL"],[23,62,34,2],[24,0,35,2],[24,11,35,9,"_sourceCodeScriptURL"],[24,31,35,2],[25,0,36,1],[27,0,38,0],[27,11,38,9,"getDevServerURL"],[27,26,38,0],[27,29,38,36],[28,0,39,2],[28,8,39,6,"_serverURL"],[28,18,39,16],[28,23,39,21,"undefined"],[28,32,39,2],[28,34,39,32],[29,0,40,4],[29,10,40,10,"sourceCodeScriptURL"],[29,29,40,29],[29,32,40,32,"getSourceCodeScriptURL"],[29,54,40,54],[29,56,40,4],[30,0,41,4],[30,10,41,10,"match"],[30,15,41,15],[30,18,42,6,"sourceCodeScriptURL"],[30,37,42,25],[30,41,42,29,"sourceCodeScriptURL"],[30,60,42,48],[30,61,42,49,"match"],[30,66,42,29],[30,67,42,55],[30,86,42,29],[30,87,41,4],[32,0,43,4],[32,10,43,8,"match"],[32,15,43,4],[32,17,43,15],[33,0,45,6,"_serverURL"],[33,8,45,6,"_serverURL"],[33,18,45,16],[33,21,45,19,"match"],[33,26,45,24],[33,27,45,25],[33,28,45,24],[33,29,45,6],[34,0,46,5],[34,7,43,4],[34,13,46,11],[35,0,48,6,"_serverURL"],[35,8,48,6,"_serverURL"],[35,18,48,16],[35,21,48,19],[35,25,48,6],[36,0,49,5],[37,0,50,3],[39,0,51,2],[39,11,51,9,"_serverURL"],[39,21,51,2],[40,0,52,1],[42,0,54,0],[42,11,54,9,"_coerceLocalScriptURL"],[42,32,54,0],[42,33,54,31,"scriptURL"],[42,42,54,0],[42,44,54,60],[43,0,55,2],[43,8,55,6,"scriptURL"],[43,17,55,2],[43,19,55,17],[44,0,56,4],[44,10,56,8,"scriptURL"],[44,19,56,17],[44,20,56,18,"startsWith"],[44,30,56,8],[44,31,56,29],[44,42,56,8],[44,43,56,4],[44,45,56,43],[45,0,58,6],[45,15,58,13],[45,19,58,6],[46,0,59,5],[48,0,60,4,"scriptURL"],[48,6,60,4,"scriptURL"],[48,15,60,13],[48,18,60,16,"scriptURL"],[48,27,60,25],[48,28,60,26,"substring"],[48,37,60,16],[48,38,60,36],[48,39,60,16],[48,41,60,39,"scriptURL"],[48,50,60,48],[48,51,60,49,"lastIndexOf"],[48,62,60,39],[48,63,60,61],[48,66,60,39],[48,70,60,68],[48,71,60,16],[48,72,60,4],[50,0,61,4],[50,10,61,8],[50,11,61,9,"scriptURL"],[50,20,61,18],[50,21,61,19,"includes"],[50,29,61,9],[50,30,61,28],[50,35,61,9],[50,36,61,4],[50,38,61,36],[51,0,64,6,"scriptURL"],[51,8,64,6,"scriptURL"],[51,17,64,15],[51,20,64,18],[51,32,64,30,"scriptURL"],[51,41,64,6],[52,0,65,5],[53,0,66,3],[55,0,67,2],[55,11,67,9,"scriptURL"],[55,20,67,2],[56,0,68,1],[58,0,70,0],[58,11,70,9,"getScriptURL"],[58,23,70,0],[58,26,70,33],[59,0,71,2],[59,8,71,6,"_scriptURL"],[59,18,71,16],[59,23,71,21,"undefined"],[59,32,71,2],[59,34,71,32],[60,0,72,4,"_scriptURL"],[60,6,72,4,"_scriptURL"],[60,16,72,14],[60,19,72,17,"_coerceLocalScriptURL"],[60,40,72,38],[60,41,72,39,"getSourceCodeScriptURL"],[60,63,72,61],[60,65,72,38],[60,66,72,4],[61,0,73,3],[63,0,74,2],[63,11,74,9,"_scriptURL"],[63,21,74,2],[64,0,75,1],[66,0,77,0],[66,11,77,9,"setCustomSourceTransformer"],[66,37,77,0],[66,38,78,2,"transformer"],[66,49,77,0],[66,51,79,8],[67,0,80,2,"_customSourceTransformer"],[67,4,80,2,"_customSourceTransformer"],[67,28,80,26],[67,31,80,29,"transformer"],[67,42,80,2],[68,0,81,1],[70,0,87,0],[70,11,87,9,"resolveAssetSource"],[70,29,87,0],[70,30,87,28,"source"],[70,36,87,0],[70,38,87,63],[71,0,88,2],[71,8,88,6],[71,15,88,13,"source"],[71,21,88,6],[71,26,88,24],[71,34,88,2],[71,36,88,34],[72,0,89,4],[72,13,89,11,"source"],[72,19,89,4],[73,0,90,3],[75,0,92,2],[75,8,92,8,"asset"],[75,13,92,13],[75,16,92,16,"AssetRegistry"],[75,29,92,29],[75,30,92,30,"getAssetByID"],[75,42,92,16],[75,43,92,43,"source"],[75,49,92,16],[75,50,92,2],[77,0,93,2],[77,8,93,6],[77,9,93,7,"asset"],[77,14,93,2],[77,16,93,14],[78,0,94,4],[78,13,94,11],[78,17,94,4],[79,0,95,3],[81,0,97,2],[81,8,97,8,"resolver"],[81,16,97,16],[81,19,97,19],[81,23,97,23,"AssetSourceResolver"],[81,42,97,19],[81,43,98,4,"getDevServerURL"],[81,58,98,19],[81,60,97,19],[81,62,99,4,"getScriptURL"],[81,74,99,16],[81,76,97,19],[81,78,100,4,"asset"],[81,83,97,19],[81,84,97,2],[83,0,102,2],[83,8,102,6,"_customSourceTransformer"],[83,32,102,2],[83,34,102,32],[84,0,103,4],[84,13,103,11,"_customSourceTransformer"],[84,37,103,35],[84,38,103,36,"resolver"],[84,46,103,35],[84,47,103,4],[85,0,104,3],[87,0,105,2],[87,11,105,9,"resolver"],[87,19,105,17],[87,20,105,18,"defaultAsset"],[87,32,105,9],[87,34,105,2],[88,0,106,1],[90,0,108,0,"module"],[90,2,108,0,"module"],[90,8,108,6],[90,9,108,7,"exports"],[90,16,108,0],[90,19,108,17,"resolveAssetSource"],[90,37,108,0],[91,0,109,0,"module"],[91,2,109,0,"module"],[91,8,109,6],[91,9,109,7,"exports"],[91,16,109,0],[91,17,109,15,"pickScale"],[91,26,109,0],[91,29,109,27,"AssetSourceResolver"],[91,48,109,46],[91,49,109,47,"pickScale"],[91,58,109,0],[92,0,110,0,"module"],[92,2,110,0,"module"],[92,8,110,6],[92,9,110,7,"exports"],[92,16,110,0],[92,17,110,15,"setCustomSourceTransformer"],[92,43,110,0],[92,46,110,44,"setCustomSourceTransformer"],[92,72,110,0]],"functionMap":{"names":["<global>","getSourceCodeScriptURL","getDevServerURL","_coerceLocalScriptURL","getScriptURL","setCustomSourceTransformer","resolveAssetSource"],"mappings":"AAA;ACuB;CDY;AEE;CFc;AGE;CHc;AIE;CJK;AKE;CLI;AMM;CNmB"}},"type":"js/module"}]}