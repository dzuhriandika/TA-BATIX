{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var invariant = _$$_REQUIRE(_dependencyMap[2], \"invariant\");\n\n  var EventHolder = function () {\n    function EventHolder() {\n      _classCallCheck(this, EventHolder);\n\n      this._heldEvents = {};\n      this._currentEventKey = null;\n    }\n\n    _createClass(EventHolder, [{\n      key: \"holdEvent\",\n      value: function holdEvent(eventType) {\n        this._heldEvents[eventType] = this._heldEvents[eventType] || [];\n        var eventsOfType = this._heldEvents[eventType];\n        var key = {\n          eventType: eventType,\n          index: eventsOfType.length\n        };\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        eventsOfType.push(args);\n        return key;\n      }\n    }, {\n      key: \"emitToListener\",\n      value: function emitToListener(eventType, listener, context) {\n        var _this = this;\n\n        var eventsOfType = this._heldEvents[eventType];\n\n        if (!eventsOfType) {\n          return;\n        }\n\n        var origEventKey = this._currentEventKey;\n        eventsOfType.forEach(function (eventHeld, index) {\n          if (!eventHeld) {\n            return;\n          }\n\n          _this._currentEventKey = {\n            eventType: eventType,\n            index: index\n          };\n          listener.apply(context, eventHeld);\n        });\n        this._currentEventKey = origEventKey;\n      }\n    }, {\n      key: \"releaseCurrentEvent\",\n      value: function releaseCurrentEvent() {\n        invariant(this._currentEventKey !== null, 'Not in an emitting cycle; there is no current event');\n        this._currentEventKey && this.releaseEvent(this._currentEventKey);\n      }\n    }, {\n      key: \"releaseEvent\",\n      value: function releaseEvent(token) {\n        delete this._heldEvents[token.eventType][token.index];\n      }\n    }, {\n      key: \"releaseEventType\",\n      value: function releaseEventType(type) {\n        this._heldEvents[type] = [];\n      }\n    }]);\n\n    return EventHolder;\n  }();\n\n  module.exports = EventHolder;\n});","lineCount":82,"map":[[2,0,11,0],[8,0,13,0],[8,6,13,6,"invariant"],[8,15,13,15],[8,18,13,18,"require"],[8,29,13,25],[8,61,13,0],[10,6,15,6,"EventHolder"],[10,17],[11,0,19,2],[11,27,19,16],[12,0,19,16],[14,0,20,4],[14,11,20,9,"_heldEvents"],[14,22,20,4],[14,25,20,23],[14,27,20,4],[15,0,21,4],[15,11,21,9,"_currentEventKey"],[15,27,21,4],[15,30,21,28],[15,34,21,4],[16,0,22,3],[20,32,46,4,"eventType"],[20,41],[20,43,48,70],[21,0,49,4],[21,13,49,9,"_heldEvents"],[21,24,49,4],[21,25,49,21,"eventType"],[21,34,49,4],[21,38,49,34],[21,43,49,39,"_heldEvents"],[21,54,49,34],[21,55,49,51,"eventType"],[21,64,49,34],[21,69,49,65],[21,71,49,4],[22,0,50,4],[22,12,50,10,"eventsOfType"],[22,24,50,22],[22,27,50,25],[22,32,50,30,"_heldEvents"],[22,43,50,25],[22,44,50,42,"eventType"],[22,53,50,25],[22,54,50,4],[23,0,51,4],[23,12,51,10,"key"],[23,15,51,13],[23,18,51,16],[24,0,52,6,"eventType"],[24,10,52,6,"eventType"],[24,19,52,15],[24,21,52,17,"eventType"],[24,30,51,16],[25,0,53,6,"index"],[25,10,53,6,"index"],[25,15,53,11],[25,17,53,13,"eventsOfType"],[25,29,53,25],[25,30,53,26,"length"],[26,0,51,16],[26,9,51,4],[28,0,48,70],[28,42,47,7,"args"],[28,46,48,70],[29,0,47,7,"args"],[29,10,47,7,"args"],[29,14,48,70],[30,0,48,70],[32,0,55,4,"eventsOfType"],[32,8,55,4,"eventsOfType"],[32,20,55,16],[32,21,55,17,"push"],[32,25,55,4],[32,26,55,22,"args"],[32,30,55,4],[33,0,56,4],[33,15,56,11,"key"],[33,18,56,4],[34,0,57,3],[37,37,67,17,"eventType"],[37,46],[37,48,67,37,"listener"],[37,56],[37,58,67,57,"context"],[37,65],[37,67,67,75],[38,0,67,75],[40,0,68,4],[40,12,68,10,"eventsOfType"],[40,24,68,22],[40,27,68,25],[40,32,68,30,"_heldEvents"],[40,43,68,25],[40,44,68,42,"eventType"],[40,53,68,25],[40,54,68,4],[42,0,69,4],[42,12,69,8],[42,13,69,9,"eventsOfType"],[42,25,69,4],[42,27,69,23],[43,0,70,6],[44,0,71,5],[46,0,72,4],[46,12,72,10,"origEventKey"],[46,24,72,22],[46,27,72,25],[46,32,72,30,"_currentEventKey"],[46,48,72,4],[47,0,73,4,"eventsOfType"],[47,8,73,4,"eventsOfType"],[47,20,73,16],[47,21,73,17,"forEach"],[47,28,73,4],[47,29,73,25],[47,39,73,37,"eventHeld"],[47,48,73,25],[47,50,73,59,"index"],[47,55,73,25],[47,57,73,69],[48,0,74,6],[48,14,74,10],[48,15,74,11,"eventHeld"],[48,24,74,6],[48,26,74,22],[49,0,75,8],[50,0,76,7],[52,0,77,6],[52,10,77,6],[52,15,77,10],[52,16,77,11,"_currentEventKey"],[52,32,77,6],[52,35,77,30],[53,0,78,8,"eventType"],[53,12,78,8,"eventType"],[53,21,78,17],[53,23,78,19,"eventType"],[53,32,77,30],[54,0,79,8,"index"],[54,12,79,8,"index"],[54,17,79,13],[54,19,79,15,"index"],[55,0,77,30],[55,11,77,6],[56,0,81,6,"listener"],[56,10,81,6,"listener"],[56,18,81,14],[56,19,81,15,"apply"],[56,24,81,6],[56,25,81,21,"context"],[56,32,81,6],[56,34,81,30,"eventHeld"],[56,43,81,6],[57,0,82,5],[57,9,73,4],[58,0,83,4],[58,13,83,9,"_currentEventKey"],[58,29,83,4],[58,32,83,28,"origEventKey"],[58,44,83,4],[59,0,84,3],[62,44,94,24],[63,0,95,4,"invariant"],[63,8,95,4,"invariant"],[63,17,95,13],[63,18,96,6],[63,23,96,11,"_currentEventKey"],[63,39,96,6],[63,44,96,32],[63,48,95,13],[63,50,97,6],[63,103,95,13],[63,104,95,4],[64,0,99,4],[64,13,99,9,"_currentEventKey"],[64,29,99,4],[64,33,99,29],[64,38,99,34,"releaseEvent"],[64,50,99,29],[64,51,99,47],[64,56,99,52,"_currentEventKey"],[64,72,99,29],[64,73,99,4],[65,0,100,3],[68,35,108,15,"token"],[68,40],[68,42,108,30],[69,0,109,4],[69,15,109,11],[69,20,109,16,"_heldEvents"],[69,31,109,11],[69,32,109,28,"token"],[69,37,109,33],[69,38,109,34,"eventType"],[69,47,109,11],[69,49,109,45,"token"],[69,54,109,50],[69,55,109,51,"index"],[69,60,109,11],[69,61,109,4],[70,0,110,3],[73,39,117,19,"type"],[73,43],[73,45,117,33],[74,0,118,4],[74,13,118,9,"_heldEvents"],[74,24,118,4],[74,25,118,21,"type"],[74,29,118,4],[74,33,118,29],[74,35,118,4],[75,0,119,3],[81,0,122,0,"module"],[81,2,122,0,"module"],[81,8,122,6],[81,9,122,7,"exports"],[81,16,122,0],[81,19,122,17,"EventHolder"],[81,30,122,0]],"functionMap":{"names":["<global>","EventHolder","constructor","holdEvent","emitToListener","eventsOfType.forEach$argument_0","releaseCurrentEvent","releaseEvent","releaseEventType"],"mappings":"AAA;ACc;ECI;GDG;EEuB;GFY;EGU;yBCM;KDS;GHE;EKU;GLM;EMQ;GNE;EOO;GPE;CDC"}},"type":"js/module"}]}